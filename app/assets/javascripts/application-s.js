!function(i){"use strict";var r=i.jQuery,s=i.GOVUK||{},a={_hasScrolled:!1,_scrollTimeout:!1,_hasResized:!1,_resizeTimeout:!1,getWindowDimensions:function(){return{height:r(i).height(),width:r(i).width()}},getWindowPositions:function(){return{scrollTop:r(i).scrollTop()}},getElementOffset:function(t){return t.offset()},init:function(){var t=r(".js-stick-at-top-when-scrolling");0<t.length&&(a.$els=t,!1===a._scrollTimeout&&(r(i).scroll(a.onScroll),a._scrollTimeout=i.setInterval(a.checkScroll,50)),!1===a._resizeTimeout&&(r(i).resize(a.onResize),a._resizeTimeout=i.setInterval(a.checkResize,50))),s.stopScrollingAtFooter&&t.each(function(t,e){var n=r(e).find("img");if(0<n.length){var o=new i.Image;o.onload=function(){s.stopScrollingAtFooter.addEl(r(e),r(e).outerHeight())},o.src=n.attr("src")}else s.stopScrollingAtFooter.addEl(r(e),r(e).outerHeight())})},onScroll:function(){a._hasScrolled=!0},onResize:function(){a._hasResized=!0},checkScroll:function(){if(!0===a._hasScrolled){a._hasScrolled=!1;var i=a.getWindowPositions().scrollTop,s=a.getWindowDimensions();a.$els.each(function(t,e){var n=r(e),o=n.data("scrolled-from");o&&i<o?a.release(n):768<s.width&&i>=a.getElementOffset(n).top&&a.stick(n)})}},checkResize:function(){if(!0===a._hasResized){a._hasResized=!1;var s=a.getWindowDimensions();a.$els.each(function(t,e){var n=r(e);if(n.hasClass("js-sticky-resize")){var o=r(".shim"),i=n.parent("div").width();o.css("width",i),n.css("width",i)}s.width<=768&&a.release(n)})}},stick:function(t){if(!t.hasClass("content-fixed")){t.data("scrolled-from",a.getElementOffset(t).top);var e=Math.max(t.height(),1),n=t.width();t.before('<div class="shim" style="width: '+n+"px; height: "+e+'px">&nbsp;</div>'),t.css("width",n+"px").addClass("content-fixed")}},release:function(t){t.hasClass("content-fixed")&&(t.data("scrolled-from",!1),t.removeClass("content-fixed").css("width",""),t.siblings(".shim").remove())}};s.stickAtTopWhenScrolling=a,i.GOVUK=s}(window),function(r){"use strict";var a=r.jQuery,t=r.GOVUK||{},c={_pollingId:null,_isPolling:!1,_hasScrollEvt:!1,_els:[],addEl:function(t,e){var n;if(t.length){n=parseInt(t.css("top"),10),n=isNaN(n)?0:n,c.updateFooterTop(),a(r).on("govuk.pageSizeChanged",c.updateFooterTop);var o=a("<div></div>");o.insertBefore(t);var i=o.offset().top-o.position().top;o.remove();var s={$fixedEl:t,height:e+n,fixedTop:e+i,state:"fixed"};c._els.push(s),c.initTimeout()}},updateFooterTop:function(){var t=a(".js-footer:eq(0)");if(0===t.length)return 0;c.footerTop=t.offset().top-10},initTimeout:function(){!1===c._hasScrollEvt&&(a(window).scroll(c.onScroll),c._hasScrollEvt=!0)},onScroll:function(){!1===c._isPolling&&c.startPolling()},startPolling:window.requestAnimationFrame?function(){var t=function(){c.checkScroll(),!0===c._isPolling&&c.startPolling()};c._pollingId=window.requestAnimationFrame(t),c._isPolling=!0}:function(){c._pollingId=window.setInterval(c.checkScroll,16),c._isPolling=!0},stopPolling:window.requestAnimationFrame?function(){window.cancelAnimationFrame(c._pollingId),c._isPolling=!1}:function(){window.clearInterval(c._pollingId),c._isPolling=!1},checkScroll:function(){var n=a(window).scrollTop();n<c.cachedScrollTop+2&&n>c.cachedScrollTop-2?c.stopPolling():(c.cachedScrollTop=n,a.each(c._els,function(t,e){n+e.height>c.footerTop?c.stick(e):c.unstick(e)}))},stick:function(t){"fixed"===t.state&&"fixed"===t.$fixedEl.css("position")&&(t.$fixedEl.css({position:"absolute",top:c.footerTop-t.fixedTop}),t.state="absolute")},unstick:function(t){"absolute"===t.state&&(t.$fixedEl.css({position:"",top:""}),t.state="fixed")}};t.stopScrollingAtFooter=c,a(r).load(function(){a(r).trigger("govuk.pageSizeChanged")}),r.GOVUK=t}(window),function(t){"use strict";t.GOVUK=t.GOVUK||{},t.GOVUK.getCurrentLocation=function(){return t.location}}(window),window.GOVUK.Modules=window.GOVUK.Modules||{},function(){"use strict";window.GOVUK.Modules.AccordionWithDescriptions=function(){function F(t){var e=this;this.$subsectionContent=t.find(".js-subsection-content"),this.$subsectionButton=t.find(".js-subsection-button"),this.title=e.$subsectionButton.text(),this.toggle=function(){e.isClosed()?e.open():e.close()},this.open=function(){e.$subsectionContent.removeClass("js-hidden"),t.removeClass("subsection"),t.addClass("subsection--is-open"),e.$subsectionButton.attr("aria-expanded","true")},this.close=function(){e.$subsectionContent.addClass("js-hidden"),t.removeClass("subsection--is-open"),t.addClass("subsection"),e.$subsectionButton.attr("aria-expanded","false")},this.isClosed=function(){return e.$subsectionContent.hasClass("js-hidden")}}function _(t,e){var n=this;this.$target=$(e.target),this.track=function(){I("pageElementInteraction",n._trackingAction(),{label:n._trackingLabel()})},this._trackingAction=function(){return t.isClosed()?"accordionClosed":"accordionOpened"},this._trackingLabel=function(){return n._clickedOnIcon()?t.title+" - "+n._iconType()+" Click":n._clickedOnHeading()?t.title+" - Heading Click":t.title+" - Click Elsewhere"},this._clickedOnIcon=function(){return n.$target.hasClass("subsection__icon")},this._clickedOnHeading=function(){return n.$target.hasClass("js-subsection-button")},this._iconType=function(){return t.isClosed()?"Minus":"Plus"}}function I(t,e,n){GOVUK.analytics&&GOVUK.analytics.trackEvent&&GOVUK.analytics.trackEvent(t,e,n)}this.start=function(n){function e(){return $("h1").text()}function o(t){return t.replace(/\s+/g,"_")}function t(){var t=e();return"GOVUK_service_manual_"+(t=(t=o(t)).toLowerCase())+"_"}function i(){n.prepend('<div class="subsection-controls js-subsection-controls"><button aria-expanded="false">Open all</button></div>')}function s(){n.find(".subsection__title").each(function(t){$(this).wrapInner('<button class="subsection__button js-subsection-button" aria-expanded="false" aria-controls="subsection_content_'+t+'"></button>')})}function r(){k.append('<span class="subsection__icon"></span>')}function a(){for(var t="",e=0;e<w;e++)t+="subsection_content_"+e+" ";(v=n.find(".js-subsection-controls button")).attr("aria-controls",t)}function c(){$.each(n.find(".js-subsection"),function(){new F($(this)).close()})}function u(){var t,e=l();e.length&&((t=n.find(e).parents(".js-subsection")).length&&new F(t).open())}function l(){return GOVUK.getCurrentLocation().hash}function d(){n.find(".subsection__content").each(function(){var t=$(this).attr("id");sessionStorage.getItem(C+t)&&p(n.find("#"+t))}),b()}function f(){n.find(".subsection--is-open").length&&n.find(".subsection--is-open").each(function(){var t=$(this).find(".subsection__content").attr("id");sessionStorage.setItem(C+t,"Opened")})}function h(){n.find(".subsection").length&&n.find(".subsection").each(function(){var t=$(this).find(".subsection__content").attr("id");sessionStorage.removeItem(C+t,t)})}function g(){n.find(".subsection__header").on("click",function(t){var e=new F($(this).parent(".js-subsection"));return e.toggle(),b(),f(),h(),new _(e,t).track(),!1})}function m(){(v=n.find(".js-subsection-controls button")).on("click",function(){var o="";return"Open all"==v.text()?(v.text("Close all"),v.attr("aria-expanded","true"),o="open",I("pageElementInteraction","accordionAllOpened",{label:"Open All"})):(v.text("Open all"),v.attr("aria-expanded","false"),o="close",I("pageElementInteraction","accordionAllClosed",{label:"Close All"})),n.find(".js-subsection").each(function(){var t=$(this),e=t.find(".js-subsection-button"),n=t.find(".js-subsection-content");"open"==o?(e.attr("aria-expanded","true"),n.removeClass("js-hidden"),t.removeClass("subsection"),t.addClass("subsection--is-open")):(e.attr("aria-expanded","false"),n.addClass("js-hidden"),t.addClass("subsection"),t.removeClass("subsection--is-open"))}),f(),h(),!1})}function p(t){new F(t.parent(".js-subsection")).open(),b()}function b(){n.find(".subsection--is-open").length===w?v.text("Close all"):v.text("Open all")}n.addClass("js-accordion-with-descriptions"),n.removeClass("js-hidden");var v,k=n.find(".subsection__header"),w=n.find(".subsection__content").length,C=t();i(),s(),r(),a(),c(),d(),u(),g(),m()}}}(),function(t,e){"use strict";var h=e.$,o=h(e);t.HighlightActiveSectionHeading=function(){var d=this,t=!0,e=!0,n=50,f=[];d.getWindowDimensions=function(){return{height:o.height(),width:o.width()}},d.getWindowPositions=function(){return{scrollTop:o.scrollTop()}},d.getElementOffset=function(t){return t.offset()},d.start=function(t){o.resize(d.hasResized),o.scroll(d.hasScrolled),setInterval(d.checkResize,n),setInterval(d.checkScroll,n),d.$anchors=t.find(".js-page-contents a"),d.getAnchors(),d.checkResize(),d.checkScroll()},d.hasResized=function(){return t=!0},d.hasScrolled=function(){return e=!0},d.checkResize=function(){t&&(e=!(t=!1))},d.checkScroll=function(){e&&(e=!1,d.getWindowDimensions().width<=768?d.removeActiveItem():d.updateActiveNavItem())},d.getAnchors=function(){h.each(d.$anchors,function(){var t=h(this).attr("href");f.push(t)})},d.getHeadingPosition=function(t){return t.offset()},d.getNextHeadingPosition=function(t){return t.offset()},d.getFooterPosition=function(t){return t.offset()},d.getDistanceBetweenHeadings=function(t,e){return e-t},d.updateActiveNavItem=function(){var u=d.getWindowPositions().scrollTop,l=d.getFooterPosition(h("#footer"));h.each(d.$anchors,function(t){var e=f[t],n=f[t+1],o=h(e),i=h(n),s=d.getHeadingPosition(o);if(s){if(s=s.top,s-=53,n)var r=d.getNextHeadingPosition(i).top;var a=d.getDistanceBetweenHeadings(s,r);if(a)var c=s<=u&&u<s+a;else c=s<=u&&u<l.top;c&&d.setActiveItem(e)}})},d.setActiveItem=function(t){d.$anchors.removeClass("active"),d.$anchors.filter("[href='"+t+"']").addClass("active")},d.removeActiveItem=function(){d.$anchors.removeClass("active")}}}(window.GOVUK.Modules,window),function(){"use strict";function t(){this.controller=null,this.view=null,this.start=function(t){this.view=new e(t),this.controller=new n(this.view),this.controller.init()}}function e(t){function e(e){return function(t){t.preventDefault(),e()}}var s=this;this.$pageIsUsefulButton=t.find(".js-page-is-useful"),this.$pageIsNotUsefulButton=t.find(".js-page-is-not-useful"),this.$somethingIsWrongButton=t.find(".js-something-is-wrong"),this.$feedbackFormContainer=t.find(".js-feedback-form"),this.$feedbackForm=s.$feedbackFormContainer.find("form"),this.$feedbackFormSubmitButton=s.$feedbackFormContainer.find("[type=submit]"),this.$feedbackFormCloseButton=s.$feedbackFormContainer.find(".js-close-feedback-form"),this.$prompt=t.find(".js-prompt"),this.onPageIsUsefulButtonClicked=function(t){s.$pageIsUsefulButton.on("click",e(t))},this.onPageIsNotUsefulButtonClicked=function(t){s.$pageIsNotUsefulButton.on("click",e(t))},this.onSomethingIsWrongButtonClicked=function(t){s.$somethingIsWrongButton.on("click",e(t))},this.onFeedbackFormCloseButtonClicked=function(t){s.$feedbackFormCloseButton.on("click",e(t))},this.onSubmitFeedbackForm=function(t){s.$feedbackForm.on("submit",e(t))},this.showSuccess=function(){s.$prompt.html('<span id="feedback-success-message">Thanks for your feedback.</span>'),s.$prompt.hasClass("js-hidden")&&s.toggleFeedbackForm(),s.$prompt.attr("aria-labelledby","feedback-success-message"),s.$prompt.focus()},this.toggleFeedbackForm=function(){s.$prompt.toggleClass("js-hidden"),s.$feedbackFormContainer.toggleClass("js-hidden");var t=!s.$feedbackFormContainer.hasClass("js-hidden");s.updateAriaAttributes(t),t&&$(".form-control",s.$feedbackFormContainer).first().focus()},this.updateAriaAttributes=function(t){s.$feedbackFormContainer.attr("aria-hidden",!t),$("[aria-controls=improveThisPageForm]").attr("aria-expanded",t)},this.feedbackFormContainerData=function(){return s.$feedbackFormContainer.find("input, textarea").serialize()},this.feedbackFormContainerTrackEventParams=function(){return s.getTrackEventParams(s.$feedbackFormContainer)},this.pageIsUsefulTrackEventParams=function(){return s.getTrackEventParams(s.$pageIsUsefulButton)},this.pageIsNotUsefulTrackEventParams=function(){return s.getTrackEventParams(s.$pageIsNotUsefulButton)},this.somethingIsWrongTrackEventParams=function(){return s.getTrackEventParams(s.$somethingIsWrongButton)},this.getTrackEventParams=function(t){return{category:t.data("track-category"),action:t.data("track-action")}},this.renderErrors=function(t){this.clearErrors();var i=[];$.each(t,function(o,t){$.each(t,function(t,e){var n=o.charAt(0).toUpperCase()+o.slice(1)+" "+e+".";s.addErrorToField(o,n)||i.push(n)})}),i.length&&s.addGenericError('<h1 class="heading-medium error-summary-heading" id="generic-error-message">There is a problem</h1>'+$("<p>").text(i.join(" ")).html()),s.focusFirstError()},this.clearErrors=function(){$(".form-group",s.$feedbackFormContainer).removeClass("error"),$(".error-message, .error-summary",s.$feedbackFormContainer).remove(),$("[name]",s.$feedbackFormContainer).attr({"aria-describedby":"","aria-invalid":""})},this.focusFirstError=function(){$(".error-summary, .form-group.error .form-control",s.$feedbackFormContainer).first().focus()},this.addErrorToField=function(t,e){var n=s.$feedbackFormContainer.find('[name="'+t+'"]'),o=n.parents(".form-group");if(!n.length||!o.length)return!1;var i=s.generateIdFromError(e);return o.addClass("error"),$("label",o).append($("<span />",{"class":"error-message",text:e,id:i})),n.attr({"aria-describedby":i,"aria-invalid":"true"}),!0},this.addGenericError=function(t){var e=$("<div/>",{"class":"error-summary",role:"group","aria-labelledby":"generic-error-message",html:t,tabindex:-1});$(".js-errors",s.$feedbackFormContainer).html(e)},this.generateIdFromError=function(t){return"error-"+t.toString().toLowerCase().trim().replace(/&/g,"-and-").replace(/[\s\W-]+/g,"-")},this.disableSubmitFeedbackButton=function(){s.$feedbackFormSubmitButton.prop("disabled",!0)},this.enableSubmitFeedbackButton=function(){s.$feedbackFormSubmitButton.removeAttr("disabled")}}function n(e){var n=this;this.init=function(){n.bindPageIsUsefulButton(),n.bindPageIsNotUsefulButton(),n.bindSomethingIsWrongButton(),n.bindSubmitFeedbackButton(),this.bindCloseFeedbackFormButton(),e.updateAriaAttributes(!1)},this.bindPageIsUsefulButton=function(){var t=function(){n.trackEvent(e.pageIsUsefulTrackEventParams()),e.showSuccess()};e.onPageIsUsefulButtonClicked(t)},this.bindPageIsNotUsefulButton=function(){var t=function(){n.trackEvent(e.pageIsNotUsefulTrackEventParams()),e.toggleFeedbackForm()};e.onPageIsNotUsefulButtonClicked(t)},this.bindSomethingIsWrongButton=function(){var t=function(){n.trackEvent(e.somethingIsWrongTrackEventParams()),e.toggleFeedbackForm()};e.onSomethingIsWrongButtonClicked(t)},this.bindCloseFeedbackFormButton=function(){var t=function(){e.toggleFeedbackForm()};e.onFeedbackFormCloseButtonClicked(t)},this.bindSubmitFeedbackButton=function(){e.onSubmitFeedbackForm(n.handleSubmitFeedback)},this.handleSubmitFeedback=function(){$.ajax({type:"POST",url:"/contact/govuk/page_improvements",data:e.feedbackFormContainerData(),beforeSend:e.disableSubmitFeedbackButton}).done(function(){n.trackEvent(e.feedbackFormContainerTrackEventParams()),e.showSuccess()}).fail(function(t){e.enableSubmitFeedbackButton(),422==t.status?e.renderErrors(t.responseJSON.errors):(e.clearErrors(),e.addGenericError(['<h1 class="heading-medium error-summary-heading" id="generic-error-message">',"  Sorry, we\u2019re unable to receive your message right now. ","</h1>","<p>If the problem persists, we have other ways for you to provide",' feedback on the <a href="/contact/govuk">contact page</a>.</p>'].join("")),e.focusFirstError())})},this.trackEvent=function(t){GOVUK.analytics&&GOVUK.analytics.trackEvent&&GOVUK.analytics.trackEvent(t.category,t.action)}}window.GOVUK.Modules.ImproveThisPage=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";window.GOVUK=window.GOVUK||{},t.Feedback=function(){this.start=function(e){function n(t){t.find('input[type="submit"]').prop("disabled",!0)}function o(t){t.find('input[type="submit"]').removeAttr("disabled")}function i(){f.$forms.attr("aria-hidden",!0),f.$pageIsNotUsefulButton.attr("aria-expanded",!1),f.$somethingIsWrongButton.attr("aria-expanded",!1)}function t(){f.$somethingIsWrongForm.append('<input type="hidden" name="javascript_enabled" value="true"/>'),f.$somethingIsWrongForm.append($('<input type="hidden" name="referrer">').val(document.referrer||"unknown"))}function s(t){t.attr("aria-expanded",!0),$("#"+t.attr("aria-controls")).attr("aria-hidden",!1)}function r(t){f.$activeForm=e.find("#"+t),f.$activeForm.toggleClass(h),f.$prompt.toggleClass(h),!f.$activeForm.hasClass(h)?f.$activeForm.find(".gem-c-input").first().focus():f.$activeForm=!1}function a(t){return{category:t.data("track-category"),action:t.data("track-action")}}function c(t){GOVUK.analytics&&GOVUK.analytics.trackEvent&&GOVUK.analytics.trackEvent(t.category,t.action)}function u(t){"undefined"!=typeof(t=['<h2 class="gem-c-feedback__heading">',"  Sorry, we\u2019re unable to receive your message right now. ","</h2>","<p>If the problem persists, we have other ways for you to provide",' feedback on the <a href="/contact/govuk">contact page</a>.</p>'].join("")).responseJSON&&(t="undefined"==typeof t.responseJSON.message?t:t.responseJSON.message),f.$activeForm.find(".js-errors").html(t).removeClass(h).focus()}function l(){f.$promptQuestions.addClass(h),f.$promptSuccessMessage.removeClass(h).focus()}function d(){f.$prompt.removeClass(h),f.$prompt.focus()}this.$prompt=e.find(".js-prompt"),this.$fields=e.find(".gem-c-feedback__form-field"),this.$forms=e.find(".js-feedback-form"),this.$toggleForms=e.find(".js-toggle-form"),this.$closeForms=e.find(".js-close-form"),this.$activeForm=!1,this.$pageIsUsefulButton=e.find(".js-page-is-useful"),this.$pageIsNotUsefulButton=e.find(".js-page-is-not-useful"),this.$somethingIsWrongButton=e.find(".js-something-is-wrong"),this.$promptQuestions=e.find(".js-prompt-questions"),this.$promptSuccessMessage=e.find(".js-prompt-success"),this.$somethingIsWrongForm=e.find("#something-is-wrong");var f=this,h="js-hidden";i(),t(),this.$toggleForms.on("click",function(t){t.preventDefault(),r($(t.target).attr("aria-controls")),c(a($(this))),s($(this))}),this.$closeForms.on("click",function(t){t.preventDefault(),r($(t.target).attr("aria-controls")),c(a($(this))),i(),d()}),this.$pageIsUsefulButton.on("click",function(t){t.preventDefault(),c(a(f.$pageIsUsefulButton)),l(),d()}),e.find("form").on("submit",function(t){t.preventDefault();var e=$(this);$.ajax({type:"POST",url:e.attr("action"),dataType:"json",data:e.serialize(),beforeSend:n(e),timeout:6e3}).done(function(t){c(a(e)),l(t.message),d(),i(),f.$activeForm.toggleClass(h)}).fail(function(t){u(t),o(e)})})}}}(window.GOVUK.Modules),window.GOVUK.stickAtTopWhenScrolling.init(),window.GOVUK.stopScrollingAtFooter.addEl($(".js-stick-at-top-when-scrolling"));